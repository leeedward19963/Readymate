<!doctype html>
<html lang="en">
<head>

    <!-- Webpage Title -->
    <title>{{ user_info.name }} | READYMATE</title>

    <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
    <meta property="og:title" content="READYMATE"/>
    <meta property="og:description" content="입시거래플랫폼 RM"/>
    <meta property="og:image" content="{{ url_for('static', filename='ogimg.png') }}"/>

    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bulma CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.1/css/bulma.min.css">
    <!-- Font Awesome CSS -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

    <link href="{{ url_for('static', filename='mystyle.css') }}" rel="stylesheet">

    <!-- JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.js"></script>
    <script src="{{ url_for('static', filename='myjs.js') }}"></script>

    <!--tiny textarea-->
    <script src="https://cdn.tiny.cloud/1/1nwy9r96l7zsgo4mmspvobmqodgyvd6w5ap5jlv6p68axfzu/tinymce/5/tinymce.min.js" referrerpolicy="origin"></script>
    <script>
        tinymce.init({
            selector: '#mytextarea',
            resize: false,
            height: '350',
            plugins: 'image code',
            toolbar: 'undo redo | image code',

            /* without images_upload_url set, Upload tab won't show up*/
            images_upload_url: 'postAcceptor.php',

            /* we override default upload handler to simulate successful upload*/
            images_upload_handler: function (blobInfo, success, failure) {
                setTimeout(function () {
                    /* no matter what you upload, we will turn it into TinyMCE logo :)*/
                    success('http://moxiecode.cachefly.net/tinymce/v9/images/logo.png');

                    ////https://www.tiny.cloud/docs/demo/local-upload/#
                    ////위 주소가 타이니 홈피인데 윗윗줄에 http 주소 가 지워지고, 업로드한 이미지의 링크가 들어가야 미리보기가 됨.
                    ////현재 html 파일 열어보고 작동시켜보면 무슨 상황인지 바로 알거야

                }, 2000);
            },
            content_style: 'body { font-family:Helvetica,Arial,sans-serif; font-size:14px }'
        });

    </script>

    <!--google font-->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR&display=swap" rel="stylesheet">

    <script type="text/javascript">

        let sel_list = document.getElementsByClassName('selected_tag');
        $(document).ready(function () {
            $('#title_input').on('keyup', function () {
                if ($(this).val().length > 32) {
                    $(this).val($(this).val().substring(0, 32));
                    $('#title_cnt').html("(32 / 32)");
                }
                $('#title_cnt').html("(" + $(this).val().length + " / 32)");
                var text = $('#title_input').val()
            })

            $('.cat').on('click',function (){
                $('.cat').removeClass('selectedCat')
                $(this).addClass('selectedCat')
                ///이 스토리의 카테고리를 포스트. 선택된 카테고리는 selectedCat클래스를 가지니 저장할때 이 클래스가진 오브젝트의 텍스트 읽기
            })
        })

        function totop() {
            $("html, body").animate({scrollTop: 0}, 240);
        }

        function tab_to(i) {
            $("html, body");
            $('#tab_list').animate({left: `-${(i - 1) * 684}`}, 300, 'swing');
            $('.head').css({'font-size': '21px', 'font-weight': '500'});
            $(`#head_${i}`).css({'font-size': '24px', 'font-weight': '700'});
        }

        function next_tab(i) {
            $("html, body").animate({scrollTop: 220}, 0);
            $('#tab_list').animate({left: "-=684"}, 300, "swing")
            if (i == 1) {
                $('#tab_slider').css({'height': '700'})
                $('#recordpaper_view').addClass('is-hidden')
                $('#tab_3_btn_sub').addClass('is-hidden')
            } else {
                $('#tab_slider').css({'height': '700'})
                $('#recordpaper_view').addClass('is-hidden')
                $('#tab_3_btn_sub').addClass('is-hidden')
            }

            $(`#head_${i}`).css({'font-size': '21px', 'font-weight': '500'});
            $(`#head_${i + 1}`).css({'font-size': '24px', 'font-weight': '700'})
        }

        function fill_title() {
            var text = $('#title_input').val().toString()
            $('#title').text(text)
            if (text){
                $('#title_btn').css({ 'background': 'white','color':'#577FF0'})
                $('#title_btn').text('수정')
            } else {
                $('#title_btn').css({ 'background': '#577FF0','color':'white'})
                $('#title_btn').text('입력')
            }
        }

        function save_sto_post() {
            fill_title()
            let record_desc = tinymce.get("mytextarea").getContent()
            var categoty = $('.selectedCat').text()
            console.log(record_desc, categoty)

            if ($('#title_input').val() != '' && categoty != ''){
                $('#verify_tab_1').css({ 'visibility' : 'visible'})
            } else {$('#verify_tab_1').css({ 'visibility' : 'hidden'})}
            ///1탭 브이체크표시 만드는 if

            if (record_desc != '' && record_desc != '<p>내용을 입력하세요...</p>'){
                $('#verify_tab_2').css({ 'visibility' : 'visible'})
            } else {$('#verify_tab_2').css({ 'visibility' : 'hidden'})}
            ///2탭 브이체크표시 만드는 if

            var check_1 = $('#verify_tab_1').css('visibility');
            var check_2 = $('#verify_tab_2').css('visibility');

            if (check_1 == 'visible' && check_2 == 'visible'){
                $('#sell').css({ 'visibility':'visible' });
                alert('기입한 정보를 다시 한번 확인하고 [공개하기]버튼을 클릭해주세요')
            } else {$('#sell').css({ 'visibility':'hidden' })}
        }

    </script>
    <style>
        * {
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 16px;
        }
        .navbar-item:hover {
            background-color: white;
            border-bottom: #577FF0 1px solid;
            color: #577FF0;
            transition-duration: 0.3s;
        }

        /* Chrome, Safari, Edge, Opera */
        input::-webkit-outer-spin-button,
        input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        /* Firefox */
        input[type=number] {
            -moz-appearance: textfield;
        }

        .head {
            cursor:pointer; font-weight: 500;font-size: 21px; color: #595959;margin-bottom: 50px;
        }

        .grey_box {
            width: 684px;
            background-color: #F1F1F1;
            border: none;
            border-radius: 10px;
            padding: 10px 30px 15px 30px;
            line-height: 29px;
            color: #595959;
        }
        .cat{
            width: 130px;height: 40px;border-radius: 20px;border: none;
            background: #BCD3FD;color: #2B46AC;font-weight: 600;
            transition-duration: 250ms;cursor: pointer;
        }
        .cat:hover{
            letter-spacing: 2px;
        }
        .selectedCat{
            background: #3F61CE; color: white;
        }
        #sell {
            cursor:pointer; font-weight: 500;width: 174px;height: 40px;border-radius: 20px;color: white;border: none;background: #577FF0;
            transition-duration: 400ms; visibility: hidden;
        }
        #sell:hover {
            background:linear-gradient(90.64deg, #55DBC2 0%, #577FF0 100%);
            letter-spacing: 2px;
            color:white;
        }

        .footer > div > p > a {
            font-size: 12px;
            color: black;
        }
    </style>

</head>
<body class="has-navbar-fixed-top" style="padding-bottom: 30px">
<nav class="navbar is-fixed-top is-white" role="navigation" aria-label="main navigation" style="height: 60px;">
    <div style="width: 1164px; display: flex;justify-content: space-between; margin: auto">
        <div style="margin-right: 10%">
            <a class="navbar-item" href="/">
                <strong style="font-size: 1.1em;">READYMATE</strong>
            </a>
        </div>
        <div style="display: flex">
            <div>
                <a class="navbar-item" href="/">학교생활기록부</a>
            </div>
            <div>
                <a class="navbar-item" href="/">자기소개서</a>
            </div>
            <div>
                <a class="navbar-item" href="/">공부노트</a>
            </div>
            <div>
                <a class="navbar-item" href="/">학교생활자료</a>
            </div>
            <div class="dropdown is-right is-hoverable" style="height: 45px; margin-left: 15px">
                <img src="../static/eximg.jpeg"
                     style="margin-right: 10px; width: 45px; height: 45px; border-radius: 50%">
                <div class="dropdown-trigger">
                    <div aria-haspopup="true" aria-controls="dropdown-menu3"
                         style="margin-top: 6.5px">
                        <span>{{user_info.profile_name}}님&nbsp;</span>
                        <i class="fa fa-chevron-down" aria-hidden="true"
                           style="color: #595959; border: none; border-radius: 5px"></i>
                    </div>
                </div>
                <div class="dropdown-menu" id="dropdown-menu3" role="menu">
                    <div class="box"
                         style="width: 206px;background-color: white;border-radius: 10px; display: flex;flex-direction: column; justify-content: space-evenly">
                        <a href="user2.html" class="dropdown-item"
                           style="font-size: 18px;font-weight: 400;line-height:42px; color: #595959">
                            내 피드 가기
                        </a>
                        <a href="#" class="dropdown-item"
                           style="font-size: 18px;font-weight: 400;line-height:42px; color: #595959">
                            입시데이터 관리
                        </a>
                        <a href="#" class="dropdown-item"
                           style="font-size: 18px;font-weight: 400;line-height:42px;color: #595959">
                            회원정보 수정
                        </a>
                        <a href="#" class="dropdown-item"
                           style="font-size: 18px;font-weight: 400;line-height:42px;color: #595959">
                            수익내역
                        </a>
                        <hr class="dropdown-divider" style="background-color: #595959">
                        <a onclick='if(confirm("정말 로그아웃 하시겠습니까?")){alert("로그아웃")};' class="dropdown-item"
                           style="font-size: 18px;font-weight: 400;line-height:42px;color: #595959">
                            <i class="fa fa-sign-out" aria-hidden="true"></i>&nbsp;&nbsp; 로그아웃
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</nav>

<div onclick="totop()" class="totop"
     style="z-index: 1; cursor:pointer; position: fixed;bottom: 110px;right: 25px;text-align: center;line-height:5px; box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25); border:#DFDFDF 1px solid;border-radius: 35px;padding-top: 5px; width: 70px;height: 70px;background-color: white">
    <p style="font-size: 32px;font-weight: 100"><i class="fa fa-angle-up" aria-hidden="true"></i></p>
    <p style="font-size: 12px">top</p>
</div>
<div class="channel_talk"
     style="z-index: 1;position: fixed;bottom: 26px;right: 25px;text-align: center;line-height:5px; box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25); border:#DFDFDF 1px solid;border-radius: 35px;padding-top: 30px; width: 70px;height: 70px;background-color: white">
    <p>채널톡</p>
</div>

<div style="width: 1194px; margin: 90px auto 40px auto">
    <div style="display: flex; margin-bottom: 80px">
        <div style="width: 72px; height: 72px; border: none; border-radius: 36px; background-image: url('../static/myim.jpg'); background-position: center; background-size: cover"></div>
        <div style="margin-left: 30px; height: 72px;">
            <div style="display: flex;line-height: 30px">
            <div style="color: #595959;margin-bottom: 19px">일이삼사오륙칠팔구</div><div style="margin-left: 10px;line-height: 30px; width: 78px;text-align: center;font-weight: 600; height: 30px;border-radius: 15px;background: #F4F790;border: none;">스토리</div>
            </div>
            <p id="title" style="border: none; color: black;width: 800px;font-size: 21px;margin-right: 16px"></p>
        </div>
    </div>
    <div style="display: flex;position: relative">
        <div style="width: 174px; margin-right: 132px;bottom:100px;">
            <div onclick="tab_to(1);$('#tab_slider').css({'height': '700'});" id="head_1" class="head" style="font-weight: 700;font-size: 24px;">기본정보 <i id="verify_tab_1" class="fa fa-check-circle-o" style="color: #577FF0;visibility: hidden;" aria-hidden="true"></i></div>
            <div onclick="tab_to(2);$('#tab_slider').css({'height': '700'});" id="head_2" class="head" style="margin-bottom: 70px">스토리 입력 <i id="verify_tab_2" class="fa fa-check-circle-o" style="color: #577FF0;visibility: hidden;" aria-hidden="true"></i></div>
            <button onclick="save_sto_post()" style="cursor: pointer; margin-bottom: 30px; font-weight: 500;width: 174px;height: 40px;border-radius: 20px;color: white;border: none;background-color: #577FF0">
                저장하기
            </button>
            <button id="sell">
                공개하기
            </button>
<!--            위에 일부러 onmouseenter로 그냥 css에니메이션 줘봤는데, 공개하기 버튼이 활성화 되면 저 css변화 에니메이션이 적용되도록 해줘-->
        </div>
        <div id="tab_slider" style="width: 684px; overflow: hidden; position: relative;height: 700px;">
            <div id="tab_list" style="position: absolute;display: flex;">
                <div id="tab_1" style="width: 684px">
                    <p style="font-size: 21px; font-weight: 600">제목</p><br>
                    <div class="grey_box" style="margin-bottom: 24px">
                        <p style="font-weight: 600">TIP</p>
                        <p style="font-size: 14px;">잘 만든 제목은 조회수를 높이는 데 도움이 됩니다. 멘티들의 궁금증을 자극하는 제목을 작성해보세요!</p>
                        <li style="font-size: 14px">스토리의 특징을 나타내는 키워드들을 사용해보세요. </li>
                        <li style="font-size: 14px">이 스토리를 통해 도움을 얻을 수 있을 타겟 멘티들을 드러내보세요.</li>
                        <li style="font-size: 14px">글자수는 32자로 제한됩니다.</li>
                    </div>
                    <input id="title_input"
                           style="border: none; border-bottom: #797979 1px solid;margin-right: 10px; width: 590px; height: 24px; padding: 4px 5px" type="text"
                           placeholder="데이터를 잘 표현하는 제목을 입력해주세요.">
                    <button id="title_btn" onclick="fill_title()" style="cursor: pointer; width: 73px; height: 28px;border-radius: 15px;font-weight: 500; color: white;background: #577FF0;border:#577FF0 1px solid;">입력</button>
                    <p id="title_cnt" style="float: right;margin-right: 93px">0/32</p>
                    <br><br><br><br>

                    <p style="font-size: 21px; font-weight: 600">카테고리 설정</p><br>
                    <div style="display: flex;justify-content: space-evenly">
                        <button class="cat">공부자극</button>
                        <button class="cat">입시정보</button>
                        <button class="cat">공부법</button>
                    </div>
                    <div style="display: flex;justify-content: space-evenly;margin-top: 20px">
                        <button class="cat">대학생활</button>
                        <button class="cat">진로</button>
                        <button class="cat">기타 팁</button>
                    </div>


                    <br><br><br><br>
                    <div style="display: flex; float: right">
                        <button onclick="next_tab(1)"
                                style="cursor: pointer;font-weight: 500;width: 102px;height: 40px;border-radius: 20px;color: #577FF0;border: #577FF0 1px solid;background-color: white">
                            다음으로
                        </button>
                    </div>
                </div>
                <div id="tab_2" style="width: 684px">
                    <p style="font-size: 21px; font-weight: 600">상세 페이지</p><br>
                    <div class="grey_box" style="margin-bottom: 30px">
                        <p style="font-weight: 600">TIP</p>
                        <p style="font-size: 14px;">스토리는 합격수기, 정보전달, 칼럼, 일정소개, 공부법, 공부자극 등 다양한 내용을 모두 쓸 수 있는 공간입니다.<br>
                            매력적인 스토리는 멘토님의 데이터 조회수를 높이는 데 큰 도움이 됩니다.</p>
                    </div>

                    <div style="background: #E5E5E5; border: none; width: 684px;margin-bottom: 72px">
                        <form method="post">
                            <textarea id="mytextarea" name="mytextarea">
                              내용을 입력하세요...
                            </textarea>
                        </form>
                    </div>
                    <div style="display: flex; float: right">
                        <button onclick="save_sto_post()" style="cursor: pointer;margin-right: 20px; font-weight: 500;width: 102px;height: 40px;border-radius: 20px;color: white;border: none;background-color: #577FF0">
                            저장하기
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<footer style="height: 175px; padding-top: 70px;display: flex; width: 1194px; margin: auto; border-top: 1px solid #767676">
    <div style="display: flex;">
        <div style="width: 467px;margin-right: 260px">
            <b style="font-size: 12px;line-height: 21px">Readymate 레디메이트</b>
            <div style="display: flex; justify-content: space-between">
                <div style="font-size: 12px;line-height: 21px">회사소개</div>
                <div style="font-size: 12px;line-height: 21px">일반 사용자 이용약관</div>
                <div style="font-size: 12px;line-height: 21px">정보 제공자 이용약관</div>
                <div style="font-size: 12px;line-height: 21px">개인정보취급방침</div>
            </div>
            <p style="margin-top: 25px">
            <p style="font-size: 12px;line-height: 21px">(주)레디메이트&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;대표 임기범&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;서울특별시
                관악구 관악로 1 어딘가</p>
            <p style="font-size: 12px;line-height: 21px">통신판매업 신고번호 : 제2021-서울구로-0000호&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;사업자
                등록번호 : 000-00-00000</p>
            </p>
        </div>
        <div style="width: 467px; text-align: right">
            <br>
            <p style="font-size: 12px;line-height: 21px">환불 정책&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;제휴 문의&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;단체
                문의</p>
            <br><br>
            <p style="font-size: 12px;line-height: 21px">Instagram&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;Facebook&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;KakaoTalk&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;Naver
                Post&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;YouTube</p>
        </div>
    </div>
</footer>
</body>
</html>
