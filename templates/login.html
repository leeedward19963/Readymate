<!doctype html>
<html lang="en" xmlns="http://www.w3.org/1999/html" style="overflow-x: auto;background: #FAFAFA">
<head>

    <!-- Webpage Title -->
    <title>READYMATE</title>
    {% extends "layout_lock.html" %}

    {% block head %}
    <!--기기 환경에 맞춰 스케일조절 -->
    <meta name="format-detection" content="telephone=no">
    <script>
        function isMobile() {
            return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        }
        if (isMobile()){
            //alert('is-mobile')
            $(document).ready(function (){
                $('.for_PC').remove()
                var mobile_nav_item = `<div style="padding-top: 2px">
                                            <a class="navbar-item" href='/search'>통합검색</a>
                                        </div>`
                $('#nav_menu').prepend(mobile_nav_item)
                document.querySelector('nav').firstElementChild.style.width='786px'
                document.querySelector('#nav_menu').style.width='300px'
                document.querySelector('footer').style.width='786px'
                document.querySelector('footer').style.width='786px'
                $('#footer_left').append(`<p style="font-size: 12px;line-height: 21px">이메일 문의: help@readymate.kr</p>`)
                $('#footer_left_second').append(`<div style="cursor: pointer;font-size: 12px;line-height: 21px"
                                                     onclick="window.open('https://readymate.notion.site/78b989750d024461a5c90533f85a96a2')">환불 정책
                                                </div>`)
                $('#footer_right').remove()
                var initial_scale = (screen.width / $('nav').width()).toFixed(4);
                $('meta[name=viewport]').attr('content', '"width=device-width, initial-scale=' + initial_scale + ', maximum-scale=3.0, user-scalable=yes"');

            })
        }
    </script>
    <!--둥 -->

    <script type="text/javascript">
        $(document).ready(function () {
            $('#input-password').on('input', function () {
                var kor = /[ㄱ-ㅎ|ㅏ-ㅣ|가-힣]/;
                var inputVal = $('#input-password').val();
                if (inputVal.match(kor)) {
                    $('#input-password').val('');
                    alert('한글은 입력할 수 없습니다.')
                }
            })
        })

        function sign_in() {
            let id = $("#input-id").val()
            let password = $("#input-password").val()
            let recent_login = new Date().toLocaleString()
            let form_data = new FormData()
            form_data.append("id_give", id)
            form_data.append("password_give", password)
            form_data.append("recent_login_give", recent_login)
            console.log(id, password, recent_login, form_data)

            $.ajax({
                type: "POST",
                url: "/sign_in",
                data: form_data,
                cache: false,
                contentType: false, processData: false,
                success: function (response) {
                    if (response['result'] == 'success') {
                        console.log('success')
                        $.cookie('mytoken', response['token']);
                        window.location.href='/index'
                    } else {
                        alert(response['msg'])
                    }
                }
            });
        }

    </script>
    <style>
        * {
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 16px;
        }
        .navbar-item{font-weight: 600;font-size: 15px;transition-duration: 0.3s;}
        .navbar-item:hover {
            background-color: #FAFAFA;
            color: #577FF0;
        }
        .dropdown-item{transition-duration: 250ms}
        .dropdown-item:hover {
            letter-spacing: 2px;
        }
        #nav_drop_logout:hover{
            color: #F08080;
        }
        .footer > div > p > a {
            font-size: 12px;
            color: black;
        }

        button { opacity: 0.85;transition-duration: 300ms;
            width: 378px;height: 40px;border-radius: 4px;
            border: none;
            color: white;
            font-size: 21px;
            line-height: 21px;
        }
        button:hover{opacity: 1;letter-spacing: 1px}
        input::placeholder {
            font-size: 12px;
        }
        div>p>a{
            cursor: pointer; font-weight: 400; font-size: 12px;line-height: 21px; color: #595959;
            text-decoration: underline;
        }
    </style>
    {% endblock %}

    {% block content %}
<div style="width: 390px; margin: 50px auto 0 auto">
    <img src="../static/확정로고(SVG) 1.png" style="width: 376px;margin: auto">
    <p style="width: 376px;text-align: center;font-weight: lighter; letter-spacing: 32px;color: #797979">수시가쉬워진다</p>
    <br><br><br>
    <div style="display: flex;width: 378px; justify-content: space-between;line-height: 21px;margin-bottom: 13px">
        <p style="font-size: 21px; font-weight: 700; color: black">로그인</p>
        <p style="font-weight: 400; font-size: 12px;line-height: 21px; color: #595959"><a href="/find_my_id">아이디</a>나 <a href="/find_my_pw">비밀번호</a>를 잊어버리셨나요?</p>
    </div>
    <input id="input-id" type="text" placeholder="   이메일 또는 전화번호(example@gmail.com 또는 01012341234)"
           style="padding: 0 4px;width: 378px; height: 40px; border-radius: 5px; background-color: #F1F1F1; margin-bottom: 20px; border: none">
    <input id="input-password" type="password" placeholder="   영문과 숫자 조합의 8-20자의 비밀번호" onKeypress="javascript:if(event.keyCode==13) {sign_in()}"
           style="padding: 0 4px;width: 378px; height: 40px; border-radius: 5px; background-color: #F1F1F1;margin-bottom: 30px; border: none">
    <button onclick="sign_in()" style="background-color: #577FF0; margin-bottom: 20px">로그인
    </button>
    <hr style="background-color: #797979; height: 1px">
    <p style="text-align: center; color: #595959; font-size: 14px; margin-bottom: 25px;">아직 회원이 아니신가요?</p>
    <button onclick="window.location.href='/register'" style="background: linear-gradient(90.64deg, #55DBC2 0%, #577FF0 100%);">회원가입</button>
</div>
    {% endblock %}