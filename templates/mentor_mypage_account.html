<!doctype html>
<html lang="en">
<head>

    <!-- Webpage Title -->
    <title>{{ mentor_info.nickname }} | READYMATE</title>

    <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
    <meta property="og:title" content="READYMATE"/>
    <meta property="og:description" content="입시거래플랫폼 RM"/>
    <meta property="og:image" content="{{ url_for('static', filename='ogimg.png') }}"/>

    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bulma CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.1/css/bulma.min.css">
    <!-- Font Awesome CSS -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

    <link href="{{ url_for('static', filename='mystyle.css') }}" rel="stylesheet">

    <!-- JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.js"></script>
    <script src="{{ url_for('static', filename='myjs.js') }}"></script>

    <!--google font-->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR&display=swap" rel="stylesheet">

    <script type="text/javascript">
        $(document).ready(function () {
            $('.update_bank').val('{{ mentor_info.bank }}')
            $('.update_account').val('{{ mentor_info.account }}')
        })

        function totop() {
            $("html, body").animate({scrollTop: 0}, 240);
        }

        function save_myaccount() {
            var msgArray =[];
            let name = $('#name_input').val()
            let bank = $('#bank_input').val()
            let account = $('#account_input').val()
            let idcard_file = $('#idcard-input')[0].files[0]
            let form_data = new FormData()
            form_data.append("name_give", name)
            form_data.append("bank_give", bank)
            form_data.append("account_give", account)
            form_data.append("idcard_file_give", idcard_file)
            console.log(name, bank, account, idcard_file, form_data)
            if ($('#name_input').val() == ''){msgArray.push('예금주를 입력해주세요')}
            if ($('#bank_input').val() == ''){msgArray.push('은행을 선택해주세요')}
            if ($('#account_input').val() == ''){msgArray.push('계좌번호를 입력해주세요')}
            if ($('#idcard_img_upload').hasClass('is-hidden') == false){msgArray.push('신분증사본 업로드해주세요')}
            console.log(msgArray);
            if (msgArray.length>0){
                alert(msgArray[0])
            }
            else {
                $.ajax({
                    type: "POST",
                    url: "/save_myaccount",
                    data: form_data,
                    cache: false,
                    contentType: false, processData: false,
                    success: function (response) {
                        if (response["result"] == "success") {
                            alert('계좌정보를 저장하였습니다')
                            window.location.reload()
                        }
                    }
                });
            }
        }

    </script>
    <style>
        * {
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 16px;
        }

        .navbar-item:hover {
            background-color: white;
            border-bottom: #577FF0 1px solid;
            color: #577FF0;
            transition-duration: 0.3s;
        }

        /* Chrome, Safari, Edge, Opera */
        input::-webkit-outer-spin-button,
        input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        /* Firefox */
        input[type=number] {
            -moz-appearance: textfield;
        }

        .head {
            font-size: 21px;
            color: #595959;
            margin-bottom: 30px;
            cursor: pointer;
            transition-duration: 200ms;
        }

        .head:hover {
            font-size: 24px;
            font-weight: 700;
            color: #333333;
        }

        h2 {
            font-size: 21px;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .grey_board {
            background: #f1f1f1;
            border-radius: 10px;
            padding: 14px 17px;
            position: relative;
        }

        .fa-chevron-right {
            width: 22px;
            height: 22px;
            border-radius: 11px;
            background: #577FF0;
            border: none;
            text-align: center;
            font-size: 12px;
            line-height: 22px;
            color: white;
            transition-duration: 300ms;
        }

        .fa-chevron-right:hover {
            margin-left: 8px;
            margin-right: -8px;
        }

        a {
            text-decoration: underline;
        }

        .footer > div > p > a {
            font-size: 12px;
            color: black;
        }
    </style>

</head>
<body class="has-navbar-fixed-top" style="padding-bottom: 30px">
<nav class="navbar is-fixed-top is-white" role="navigation" aria-label="main navigation" style="height: 60px;">
    <div style="width: 1164px; display: flex;justify-content: space-between; margin: auto">
        <div style="margin-right: 10%">
            <a class="navbar-item" href="/">
                <strong style="font-size: 1.1em;">READYMATE</strong>
            </a>
        </div>
        <div style="display: flex">
            <div>
                <a class="navbar-item" href="/">학교생활기록부</a>
            </div>
            <div>
                <a class="navbar-item" href="/">자기소개서</a>
            </div>
            <div>
                <a class="navbar-item" href="/">공부노트</a>
            </div>
            <div>
                <a class="navbar-item" href="/">학교생활자료</a>
            </div>
            <div class="dropdown is-right is-hoverable" style="height: 45px; margin-left: 15px">
                <img src="../static/eximg.jpeg"
                     style="margin-right: 10px; width: 45px; height: 45px; border-radius: 50%">
                <div class="dropdown-trigger">
                    <div aria-haspopup="true" aria-controls="dropdown-menu3"
                         style="margin-top: 6.5px">
                        <span>{{mentor_info.nickname}}님&nbsp;</span>
                        <i class="fa fa-chevron-down" aria-hidden="true"
                           style="color: #595959; border: none; border-radius: 5px"></i>
                    </div>
                </div>
                <div class="dropdown-menu" id="dropdown-menu3" role="menu">
                    <div class="box"
                         style="width: 206px;background-color: white;border-radius: 10px; display: flex;flex-direction: column; justify-content: space-evenly">
                        <a href="user2.html" class="dropdown-item"
                           style="font-size: 18px;font-weight: 400;line-height:42px; color: #595959">
                            내 피드 가기
                        </a>
                        <a href="#" class="dropdown-item"
                           style="font-size: 18px;font-weight: 400;line-height:42px; color: #595959">
                            입시데이터 관리
                        </a>
                        <a href="#" class="dropdown-item"
                           style="font-size: 18px;font-weight: 400;line-height:42px;color: #595959">
                            회원정보 수정
                        </a>
                        <a href="#" class="dropdown-item"
                           style="font-size: 18px;font-weight: 400;line-height:42px;color: #595959">
                            수익내역
                        </a>
                        <hr class="dropdown-divider" style="background-color: #595959">
                        <a onclick='if(confirm("정말 로그아웃 하시겠습니까?")){alert("로그아웃")};' class="dropdown-item"
                           style="font-size: 18px;font-weight: 400;line-height:42px;color: #595959">
                            <i class="fa fa-sign-out" aria-hidden="true"></i>&nbsp;&nbsp; 로그아웃
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</nav>

<div onclick="totop()" class="totop"
     style="cursor:pointer; position: fixed;bottom: 110px;right: 25px;text-align: center;line-height:5px; box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25); border:#DFDFDF 1px solid;border-radius: 35px;padding-top: 5px; width: 70px;height: 70px;background-color: white">
    <p style="font-size: 32px;font-weight: 100"><i class="fa fa-angle-up" aria-hidden="true"></i></p>
    <p style="font-size: 12px">top</p>
</div>
<div class="channel_talk"
     style="z-index: 1;position: fixed;bottom: 26px;right: 25px;text-align: center;line-height:5px; box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25); border:#DFDFDF 1px solid;border-radius: 35px;padding-top: 30px; width: 70px;height: 70px;background-color: white">
    <p>채널톡</p>
</div>

<div style="width: 1194px; margin: 90px auto 40px auto">
    <div style="display: flex; margin-bottom: 80px">
        <div style="width: 72px; height: 72px; border: none; border-radius: 36px; background-image: url('../static/myim.jpg'); background-position: center; background-size: cover"></div>
        <div style="margin-left: 30px; height: 72px;">
            <div style="color: #111111;font-size: 24px; margin-bottom: 11px">일이삼사오륙칠팔구</div>
            <p style="border: none; color: #595959;width: 800px;font-size: 14px;">사용자의 id를 불러오는 곳 jinja2 ㄲ</p>
            <!--            위 p태그 아이디를 불러오는 곳-->
        </div>
    </div>
    <div style="display: flex;position: relative">
        <div style="width: 174px;margin-right: 40px">
            <div onclick="" id="head_1" class="head">
                대시보드
            </div>
            <div onclick="" id="head_2" class="head"
            >내 데이터
            </div>
            <div onclick="" id="head_3" class="head">내
                스토리
            </div>
            <div onclick="" id="head_4" class="head">
                수익 내역
            </div>
            <div onclick="" id="head_4_1" class="head" style="font-size: 16px;margin-top: -18px">수익 내역</div>
            <div onclick="" id="head_4_2" class="head"
                 style="font-size: 16px;margin-top: -18px;font-weight: 700;color: #333333;">정산 설정
            </div>
            <div onclick="" id="head_5" class="head">
                커뮤니케이션
            </div>
            <div onclick="" id="head_6" class="head">
                회원정보수정
            </div>
        </div>

        <div style="width: 990px;height: 636px">
            <p style="font-size: 21px; font-weight: 600">정산 정보 설정</p><br>
            <div class="grey_board" style="width: 684px">
                <p style="font-size: 14px;">레디메이트는 데이터 판매 대금을 곧바로 계좌에 입금해 드립니다. 따라서 판매 대금을 받기 위해서는 계좌와
                    <br>신분증을 인증받아야 합니다.</p>
            </div>

            <br>
            <div style="display: flex">
                <p style="width: 60px">예금주</p><p id="name_input"
                                                     style="text-align: center; width: 200px;margin-left: 22px;border: none;border-bottom: #797979 1px solid;padding: 2px 16px"
                                                     type="text">{{ mentor_info.name }}</p>
            </div>
            <div style="display: flex;margin-top: 32px">
                <p style="width: 60px">은행명</p>
                <select id="bank_input" class="update_bank"
                        style="width: 200px;margin-left: 22px;border: none;border-bottom: #797979 1px solid;padding: 2px 16px">
                    <option></option>
                    <option>KB국민은행</option>
                    <option>KEB하나은행</option>
                    <option>신한은행</option>
                    <option>우리은행</option>
                    <option>NH농협</option>
                    <option>IBK기업은행</option>
                    <option>KDB산업은행</option>
                    <option>한국씨티은행</option>
                    <option>SC제일은행</option>
                    <option>BNK부산은행</option>
                    <option>DGB대구은행</option>
                    <option>BNK경남은행</option>
                    <option>SH수협은행</option>
                    <option>광주은행</option>
                    <option>전북은행</option>
                    <option>제주은행</option>
                </select>
            </div>
            <div style="display: flex;margin-top: 32px">
                <p style="width: 60px">계좌번호</p><input id="account_input" class="update_account"
                                                      oninput="this.value=this.value.replace(/[^0-9]/g,'')"
                                                      style="width: 400px; margin-left: 22px;border: none;border-bottom: #797979 1px solid;padding: 2px 16px"
                                                      type="number">

                <button id="verify_account"
                        onclick="if($('#account_input').val().toString().length<11 || $('#account_input').val().toString().length>14){alert('계좌번호 길이가 맞지 않습니다')}else {$('#verified_account').removeClass('is-hidden');$('#verify_account').addClass('is-hidden')}"
                        style="cursor: pointer;margin-left: 30px; font-weight: 500;width: 102px;height: 32px;border-radius: 16px;color: white;border: none;background-color: #577FF0">
                    인증하기
                </button>
                <button id="verified_account" class="is-hidden"
                        style="margin-left: 30px; font-weight: 500;width: 102px;height: 32px;border-radius: 16px;color: #797979;border: #797979 1px solid; background-color: white">
                    발송됨
                </button>
                <!--                    이미 인증이 완료된 회원은 인증하기 버튼이 안뜨도록 위에 자잘하게 걸어놓은 함수는 지워버리면 됨.-->
            </div>
            <br><br><br>

            <p style="font-weight: 600">신분증 사본 업로드</p>
            <div style="display: flex;margin-top: 20px">
                <div id="idcard_img_upload"
                     onclick="$('#idcard_img_uploaded').removeClass('is-hidden');$('#idcard_img_upload').addClass('is-hidden')"
                     style="background-color: #D4D4D4;width: 266px;height: 143px; border: none;line-height: 128px; border-radius: 15px;text-align: center;color: #577FF0;font-size: 60px">
                    +
                </div>
                <input type="file" id="idcard-input" class="image_inputType_file is-hidden" >
                <script>
                const idcardInput = document.querySelector('#idcard-input');
                const idcard_upload_btn = document.querySelector('#idcard_img_upload');
                idcard_upload_btn.addEventListener('click', () => {
                    idcardInput.click();
                });
                </script>
                <div id="idcard_img_uploaded"
                     onclick="$('#idcard_img_verified').removeClass('is-hidden');$('#idcard_img_uploaded').addClass('is-hidden')"
                     class="is-hidden"
                     style="background-color: #D4D4D4;width: 266px;height: 143px; border: none; border-radius: 15px;text-align: center;color: #577FF0;font-size: 60px">
                    <div style="width: 40px; height: 40px;margin: 18px auto 0 auto; background-image: url('../static/circle_check.png'); background-size: cover;background-position: center"></div>
                    <p style="color: #577FF0;font-size: 14px">이미지가 성공적으로 업로드 되었습니다</p>
                    <p style="font-size: 12px;color: #595959">레디메이트 팀에서 24시간 이내에 이미지를<br>확인하고 인증을 해 드립니다.</p>
                </div>
                <!--                        아래 박스는 이미 인증된 회원이 보도록.-->
                <div id="idcard_img_verified" class="is-hidden"
                     style="background-color: #D4D4D4;width: 266px;height: 143px; border: none; border-radius: 15px;text-align: center;color: #577FF0;font-size: 60px">
                    <div style="width: 40px; height: 40px;margin: 36px auto 0 auto; background-image: url('../static/circle_check.png'); background-size: cover;background-position: center"></div>
                    <p style="color: #577FF0;font-size: 14px">멘토님의 계정은 이미 인증되었습니다.</p>
                </div>
                <div style="margin-left: 40px;line-height: 28px;color: #595959;">
                    <li style="font-size: 14px">왼편 ‘+’버튼을 눌러 신분증 사본을 업로드 해 주세요.</li>
                    <li style="font-size: 14px">신분증 사본에는 신분증의 앞면과 뒷면이 모두 있어야 합니다.</li>
                    <li style="font-size: 14px">카메라로 촬영한 사진도 가능하지만, 글씨가 잘 보여야 합니다.</li>
                    <li style="font-size: 14px">멘토는 개인기타사업자로 분류되며, 세금이 원천징수되고 난<br>나머지 금액이 입금됩니다.</li>
                </div>
            </div>

            <br><br>
            <div style="display: flex; float: right;padding-right: 270px">
                <button onclick="save_myaccount()"
                        style="cursor: pointer;margin-right: 26px; font-weight: 500;width: 102px;height: 40px;border-radius: 20px;color: white;border: none;background-color: #577FF0">
                    저장하기
                </button>
            </div>
        </div>
    </div>
</div>

<footer style="height: 175px; padding-top: 70px;display: flex; width: 1194px; margin: auto; border-top: 1px solid #767676">
    <div style="display: flex;">
        <div style="width: 467px;margin-right: 260px">
            <b style="font-size: 12px;line-height: 21px">Readymate 레디메이트</b>
            <div style="display: flex; justify-content: space-between">
                <div style="font-size: 12px;line-height: 21px">회사소개</div>
                <div style="font-size: 12px;line-height: 21px">일반 사용자 이용약관</div>
                <div style="font-size: 12px;line-height: 21px">정보 제공자 이용약관</div>
                <div style="font-size: 12px;line-height: 21px">개인정보취급방침</div>
            </div>
            <p style="margin-top: 25px">
            <p style="font-size: 12px;line-height: 21px">(주)레디메이트&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;대표 임기범&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;서울특별시
                관악구 관악로 1 어딘가</p>
            <p style="font-size: 12px;line-height: 21px">통신판매업 신고번호 : 제2021-서울구로-0000호&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;사업자
                등록번호 : 000-00-00000</p>
            </p>
        </div>
        <div style="width: 467px; text-align: right">
            <br>
            <p style="font-size: 12px;line-height: 21px">환불 정책&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;제휴 문의&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;단체
                문의</p>
            <br><br>
            <p style="font-size: 12px;line-height: 21px">Instagram&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;Facebook&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;KakaoTalk&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;Naver
                Post&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;YouTube</p>
        </div>
    </div>
</footer>
</body>
</html>
