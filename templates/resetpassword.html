<!doctype html>
<html lang="en" xmlns="http://www.w3.org/1999/html" style="overflow-x: auto;background: #FAFAFA">
<head>

    <!-- Webpage Title -->
    <title>비밀번호 재설정페이지</title>

    <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.png') }}" type="image/x-icon">
    <link rel="icon" href="{{ url_for('static', filename='favicon.png') }}" type="image/x-icon">
    <meta property="og:title" content="READYMATE:수시가쉬워진다"/>
    <meta property="og:description" content="비밀번호 재설정 페이지입니다. 타인 노출 금지"/>
    <meta property="og:image" content="{{ url_for('static', filename='ogimg.png') }}"/>

    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bulma CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.1/css/bulma.min.css">
    <!-- Font Awesome CSS -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

    <link href="{{ url_for('static', filename='mystyle.css') }}" rel="stylesheet">

    <!-- JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.js"></script>
    <script src="{{ url_for('static', filename='myjs.js') }}"></script>

    <!--google font-->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR&display=swap" rel="stylesheet">
    <!-- 기업은행안심이체 인증마크 적용 시작-->
    <script _ajs_='48_5cdf162da6fce9ea' _ah_='1104104904'>
        function onPopAuthMark(key) {
            window.open('', 'AUTHMARK_POPUP', 'height=900, width=630, status=yes, toolbar=no, menubar=no, location=no');
            document.AUTHMARK_FORM.authmarkinfo.value = key;
            document.AUTHMARK_FORM.action = 'https://kiup.ibk.co.kr/uib/jsp/guest/esc/esc1030/esc103020/CESC302020_i.jsp';
            document.AUTHMARK_FORM.target = 'AUTHMARK_POPUP';
            document.AUTHMARK_FORM.submit();
        }
    </script>

    <FORM name='AUTHMARK_FORM' METHOD='POST'>
        <input type="hidden" name="authmarkinfo">
    </FORM>

    <script>$(function () {
        $("#ib_esc_btn").click(function () {
            onPopAuthMark('기업은행에서 받은 고유번호')
        })
    });</script>
    <!--기업은행안심이체 인증마크 적용 종료 -->
    <!--기기 환경에 맞춰 스케일조절 -->
    <meta name="format-detection" content="telephone=no">
    <script>
        function isMobile() {
            return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        }
        if (isMobile()){
            //alert('is-mobile')
            $(document).ready(function (){
                $('.for_PC').remove()
                var mobile_nav_item = `<div style="padding-top: 2px">
                                            <a class="navbar-item" href='/search'>통합검색</a>
                                        </div>`
                //$('#nav_menu').prepend(mobile_nav_item)
                //document.querySelector('nav').firstElementChild.style.width='786px'
                //document.querySelector('#nav_menu').style.width='300px'
                document.querySelector('footer').style.width='786px'
                document.querySelector('footer').style.width='786px'
                $('#footer_left').append(`<p style="font-size: 12px;line-height: 21px">이메일 문의: help@readymate.kr</p>`)
                $('#footer_left_second').append(`<div style="cursor: pointer;font-size: 12px;line-height: 21px"
                                                     onclick="window.open('https://readymate.notion.site/78b989750d024461a5c90533f85a96a2')">환불 정책
                                                </div>`)
                $('#footer_right').remove()
                var initial_scale = (screen.width / $('footer').width()).toFixed(4);
                $('meta[name=viewport]').attr('content', '"width=device-width, initial-scale=' + initial_scale + ', maximum-scale=3.0, user-scalable=yes"');

            })
        }
    </script>
    <!--둥 -->

    <script type="text/javascript">

        function check_pw() {
            var eng = /[a-z,A-z]/gi;
            var num = /[0-9]/gi;
            var kor = /[ㄱ-ㅎ|ㅏ-ㅣ|가-힣]/;
            var inputVal = $('#password').val();
            if (inputVal.match(kor)){$('#password').val(inputVal.slice(0,-1));alert('한글은 입력할 수 없습니다')}
            if (inputVal.search(/\s/) == -1) {
                if (inputVal.match(eng) && inputVal.match(num)) {
                    if ($('#password').val().length > 7 && $('#password').val().length < 21) {
                        $('#verified_pw').removeClass('is-hidden')
                    } else {
                        $('#verified_pw').addClass('is-hidden')
                    }
                } else {
                    $('#verified_pw').addClass('is-hidden')
                }
            } else {
                alert('띄어쓰기는 비밀번호에 사용할 수 없습니다')
                $('#password').val('')
                {
                    $('#verified_pw').addClass('is-hidden')
                }
            }
            console.log(inputVal)
        }

        function change_pw(){
            var check1 = $('#verified_pw').hasClass('is-hidden');
            var check2 = $('#verified_repw').hasClass('is-hidden');
            console.log(check1, check2)
            if (check1 == false && check2 == false){
                var pw = $('#password').val()
                var time = parseInt(new Date().getTime())
                $.ajax({
                    type: "POST",
                    url: "/change_pw",
                    data: {password_give: pw, num_give: {{Num}}, time_give:time},
                    success: function (response) {
                        var msg = response['msg']
                        alert(msg)
                        window.location.href='/login'
                    }
                });
            } else {
                alert('정정할 비밀번호를 확인해주세요')
            }
        }

        function sign_out() {
            //로그아웃
            if (confirm('정말로 로그아웃 하시겠습니까?')){
                $.removeCookie('mytoken', {path: '/'});
                window.location.href="/login"
            }
        }

    </script>
    <style>
        * {
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 16px;
        }
        input{background: none}

        button:hover{opacity: 1;letter-spacing: 2px}

        .footer > div > p > a {
            font-size: 12px;
            color: black;
        }

        button {opacity: 0.85;transition-duration: 300ms;
            width: 378px;height: 40px;border-radius: 20px;
            border: none;
            color: white; letter-spacing: 1px;
            font-size: 18px;
            font-weight: 600;
            line-height: 21px;
        }

        input::placeholder {
            font-size: 12px;
        }
        .alert_box{
            width: 341px;min-height: 75px;max-height: 340px;background: white;border: 1px #dedede solid;border-radius: 4px;
            box-shadow: 2px 6px 2px rgba(0, 0, 0, 0.25);padding: 20px 25px 6px 25px;
            overflow-y: scroll;
        }
        .alert_delete_btn{background: none;border: white 1px solid;cursor: pointer;height: 20px;border-radius: 10px;line-height: 18px;color: #E94E58;font-size: 12px;position: absolute;right: 134px;top: 9px;transition-duration: 300ms}
        .alert_delete_btn:hover{font-weight: 600;border: #F08080 1px solid; }
        .follow_box{
            width: 480px;height: 70px;padding: 15px;background: #FAFAFA;border-radius: 4px;display: flex;
            position: relative;margin-bottom: 14px;
            cursor: pointer;
        }
        .follow_box >p {
            margin-left: 17px;line-height: 40px;text-overflow:ellipsis; width: 370px; overflow:hidden; white-space:nowrap
        }
        .red_dot{
            width: 12px;height: 12px;border-radius: 6px;background: #E94E58;
            position: absolute; right: 15px;top: 29px;
        }
    </style>

</head>
<body style="padding-bottom: 30px;background:#FAFAFA">

<div id="initial_div" style="width: 378px; margin: 50px auto 0 auto">

    <p style="font-size: 21px; font-weight: 600;text-align: center;color: #333333">비밀번호 재설정</p>
    <br><br>
    <p style="text-align: center">{{ Name }}님, 새로 변경할 비밀번호를 입력해 주세요.</p>
    <br><br>

    <div style="margin-bottom: 16px;display: flex">
        <p>비밀번호</p>
        <p class="is-hidden" id="verified_pw" style="color: #577FF0">&nbsp;&nbsp;&nbsp;<i
                class="fa fa-check-circle-o" aria-hidden="true"></i></p>
    </div>
    <input id="password" type="password" oninput="check_pw()" placeholder="8-20자리의 영문, 숫자 혼용(대문자, 특수문자 가능)"
           style="width: 340px; border: none; border-bottom: #797979 1px solid; height: 40px; line-height: 40px">
    <button style="border: none;font-size: 18px;width: max-content; background: none;color: #333333;cursor: pointer" onmouseenter="$('#password').attr('type','text')" onmouseleave="$('#password').attr('type','password')"><i class="fa fa-eye" aria-hidden="true"></i></button>

    <div style="margin-top: 38px; margin-bottom: 16px;display: flex">
        <p>비밀번호 확인</p>
        <p class="is-hidden" id="verified_repw" style="color: #577FF0">&nbsp;&nbsp;&nbsp;<i
                class="fa fa-check-circle-o" aria-hidden="true"></i></p>
    </div>
    <input id="re_password" placeholder="비밀번호가 동일해야 합니다" type="password" oninput="if ($('#re_password').val() == $('#password').val()){$('#verified_repw').removeClass('is-hidden')}else {$('#verified_repw').addClass('is-hidden')}"
           style="width: 340px; border: none; border-bottom: #797979 1px solid; height: 40px; line-height: 40px">
    <br><br><br><br>

    <button onclick="change_pw()" style="background: linear-gradient(105deg, #577FF0 0%, #3F61CE 100%);">비밀번호 변경하기</button>
</div>

<footer style="height: 175px; padding-top: 70px;display: flex; width: 1194px; margin: 140px auto 60px auto; border-top: 1px solid #767676">
    <div style="display: flex;">
        <div id="footer_left" style="width: 577px;margin-right: 120px">
            <b style="font-size: 12px;line-height: 21px">Readymate 레디메이트</b>
            <div id="footer_left_second" style="display: flex; justify-content: space-between">
                <div style="cursor: pointer;font-size: 12px;line-height: 21px"
                     onclick="window.open('https://readymate.notion.site/aa2584d2c3af4d83b165c73c8662150e')">회사소개
                </div>
                <div style="cursor: pointer;font-size: 12px;line-height: 21px"
                     onclick="window.open('https://readymate.notion.site/43b81d2da127443b8834c7f642b8dd4b')">일반 사용자 이용약관
                </div>
                <div style="cursor: pointer;font-size: 12px;line-height: 21px"
                     onclick="window.open('https://readymate.notion.site/e12f0990993946e99a7152f2c19ee235')">정보 제공자 이용약관
                </div>
                <div style="cursor: pointer;font-size: 12px;line-height: 21px"
                     onclick="window.open('https://readymate.notion.site/211119a3699645ee870c2be4ef09f24f')">개인정보취급방침
                </div>
            </div>
            <p style="margin-top: 28px">
            <p style="font-size: 12px;line-height: 21px">(주)레디메이트&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;대표 임기범&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;서울특별시
                서초구 강남대로61길 10, 6층 607호(서초동, 센터프라자)</p>
            <p style="font-size: 12px;line-height: 21px">통신판매업 신고번호 : 2021-서울서초-3123&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;사업자
                등록번호 : 292-87-02175</p>
            </p>
        </div>
        <div id="footer_right" style="width: 437px; text-align: right">
            <br>
            <p style="font-size: 12px;line-height: 21px"><span style="cursor: pointer;font-size: 12px"
                                                               onclick="window.open('https://readymate.notion.site/78b989750d024461a5c90533f85a96a2')">환불 정책</span>&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;<span
                    style="cursor: pointer;font-size: 12px"
                    onclick="window.open('https://readymate.notion.site/39914dc412af494ca378ce3ffbcb46e6')">제휴 문의</span>
            </p>
            <p style="font-size: 12px;line-height: 21px">이메일 문의: help@readymate.kr</p>
            <br>
            <p style="font-size: 12px;line-height: 21px"><span style="cursor: pointer;font-size: 12px"
                                                                              onclick="window.open('https://www.instagram.com/readymate_official/')">Instagram</span>&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;<span
                    style="cursor: pointer;font-size: 12px"
                    onclick="window.open('https://www.facebook.com/readymateofficial/')">Facebook</span>&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;<span
                    style="cursor: pointer;font-size: 12px" onclick="window.open('https://pf.kakao.com/_yxcxjrs')">KakaoTalk</span>&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;<span
                    style="cursor: pointer;font-size: 12px" onclick="window.open('https://blog.naver.com/readymate')">Naver Blog</span>
                &nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;<span style="cursor: pointer;font-size: 12px"
                                                                       onclick="window.open('https://www.youtube.com/channel/UCqIpL26iqOWWkNoaBtJlRqA')">YouTube</span>
            </p>
        </div>
        <a class="for_PC" style="cursor: pointer;margin-top: 24px;margin-left: 30px"
           href="javascript:onPopAuthMark('8c4ea07fb774f8fc8e2c6c2c56adc835')"><img
                src='https://kiup.ibk.co.kr/IBK/uib/ecb/img/KO/esc/sub/imgIbkMark.gif' alt='인증마크' border='0'/></a>

    </div>
    <script>
            var rec_count=0;
            var recordpages = document.getElementsByClassName('record-circle').length
            console.log(recordpages)

            function recordpaper_minipage_to(i) {
                $(`#recordpaper_minipages`).animate({left: `-${i*1194}`}, 350, "swing")
                $('#recordpaper_minipage_circle_0').css({'color': '#ACC2FF'});
                $('#recordpaper_minipage_circle_1').css({'color': '#ACC2FF'});
                $('#recordpaper_minipage_circle_2').css({'color': '#ACC2FF'});
                $('#recordpaper_minipage_circle_3').css({'color': '#ACC2FF'});
                $(`#recordpaper_minipage_circle_${i}`).css({ 'color': '#577FF0' })
                rec_count = i;
            }
            function recordpaper_minipage_left() {
                rec_count--;
                if (rec_count == -1){rec_count = recordpages-1}
                recordpaper_minipage_to(rec_count)
            }
            function recordpaper_minipage_right() {
                rec_count++;
                if (rec_count == recordpages){rec_count = 0}
                recordpaper_minipage_to(rec_count)
            }

            var sto_count=0;
            var storypages = document.getElementsByClassName('story-circle').length
            console.log(storypages)

            function story_minipage_to(i) {
                $(`#story_minipages`).animate({left: `-${i*1194}`}, 350, "swing")
                $('#story_minipage_circle_0').css({'color': '#ACC2FF'});
                $('#story_minipage_circle_1').css({'color': '#ACC2FF'});
                $('#story_minipage_circle_2').css({'color': '#ACC2FF'});
                $('#story_minipage_circle_3').css({'color': '#ACC2FF'});
                $(`#story_minipage_circle_${i}`).css({ 'color': '#577FF0' })
                sto_count = i;
            }
            function story_minipage_left() {
                sto_count--;
                if (sto_count == -1){sto_count = storypages-1}
                story_minipage_to(sto_count)
            }
            function story_minipage_right() {
                sto_count++;
                if (sto_count == storypages){sto_count = 0}
                story_minipage_to(sto_count)
            }

            var res_count=0;
            var resumepages = document.getElementsByClassName('resume-circle').length
            console.log(resumepages)

            function resume_minipage_to(i) {
                $(`#resume_minipages`).animate({left: `-${i*1194}`}, 350, "swing")
                $('#resume_minipage_circle_0').css({'color': '#ACC2FF'});
                $('#resume_minipage_circle_1').css({'color': '#ACC2FF'});
                $('#resume_minipage_circle_2').css({'color': '#ACC2FF'});
                $('#resume_minipage_circle_3').css({'color': '#ACC2FF'});
                $(`#resume_minipage_circle_${i}`).css({ 'color': '#577FF0' })
                res_count = i;
            }
            function resume_minipage_left() {
                res_count--;
                if (res_count == -1){res_count = resumepages-1}
                resume_minipage_to(res_count)
            }
            function resume_minipage_right() {
                res_count++;
                if (res_count == resumepages){res_count = 0}
                resume_minipage_to(res_count)
            }
    </script>
</footer>
</body>
</html>