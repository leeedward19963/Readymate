<!doctype html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
<head>

    <!-- Webpage Title -->
    <title>READYMATE</title>

    <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.png') }}" type="image/x-icon">
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
    <meta property="og:title" content="READYMATE:수시가쉬워진다"/>
    <meta property="og:description" content="대학생들의 진짜 데이터로 하는 셀프 입시 설계"/>
    <meta property="og:image" content="{{ url_for('static', filename='ogimg.png') }}"/>

    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bulma CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.1/css/bulma.min.css">
    <!-- Font Awesome CSS -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

    <link href="{{ url_for('static', filename='mystyle.css') }}" rel="stylesheet">

    <!-- JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.js"></script>
    <script src="{{ url_for('static', filename='myjs.js') }}"></script>

    <!--google font-->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR&display=swap" rel="stylesheet">
    <!-- 기업은행안심이체 인증마크 적용 시작-->
    <script _ajs_='48_5cdf162da6fce9ea' _ah_='1104104904'>
        function onPopAuthMark(key) {
            window.open('', 'AUTHMARK_POPUP', 'height=900, width=630, status=yes, toolbar=no, menubar=no, location=no');
            document.AUTHMARK_FORM.authmarkinfo.value = key;
            document.AUTHMARK_FORM.action = 'https://kiup.ibk.co.kr/uib/jsp/guest/esc/esc1030/esc103020/CESC302020_i.jsp';
            document.AUTHMARK_FORM.target = 'AUTHMARK_POPUP';
            document.AUTHMARK_FORM.submit();
        }
    </script>

    <FORM name='AUTHMARK_FORM' METHOD='POST'>
        <input type="hidden" name="authmarkinfo">
    </FORM>

    <script>$(function () {
        $("#ib_esc_btn").click(function () {
            onPopAuthMark('기업은행에서 받은 고유번호')
        })
    });</script>
    <!--기업은행안심이체 인증마크 적용 종료 -->
    <script type="text/javascript">

        function check_pw() {
            var eng = /[a-z,A-z]/gi;
            var num = /[0-9]/gi;
            var kor = /[ㄱ-ㅎ|ㅏ-ㅣ|가-힣]/;
            var inputVal = $('#password').val();
            if (inputVal.match(kor)){$('#password').val(inputVal.slice(0,-1));alert('한글은 입력할 수 없습니다')}
            if (inputVal.search(/\s/) == -1) {
                if (inputVal.match(eng) && inputVal.match(num)) {
                    if ($('#password').val().length > 7 && $('#password').val().length < 21) {
                        $('#verified_pw').removeClass('is-hidden')
                    } else {
                        $('#verified_pw').addClass('is-hidden')
                    }
                } else {
                    $('#verified_pw').addClass('is-hidden')
                }
            } else {
                alert('띄어쓰기는 비밀번호에 사용할 수 없습니다')
                $('#password').val('')
                {
                    $('#verified_pw').addClass('is-hidden')
                }
            }
            console.log(inputVal)
        }

        function change_pw(){
            var check1 = $('#verified_pw').hasClass('is-hidden');
            var check2 = $('#verified_repw').hasClass('is-hidden');
            console.log(check1, check2)
            if (check1 == false && check2 == false){
                var pw = $('#password').val()
                var time = parseInt(new Date().getTime())
                $.ajax({
                    type: "POST",
                    url: "/change_pw",
                    data: {password_give: pw, num_give: {{Num}}, time_give:time},
                    success: function (response) {
                        var msg = response['msg']
                        alert(msg)
                        window.location.href='/login'
                    }
                });
            } else {
                alert('정정할 비밀번호를 확인해주세요')
            }
        }


    </script>
    <style>
        * {
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 16px;
        }

        .footer > div > p > a {
            font-size: 12px;
            color: black;
        }

        .button {
            width: 378px;height: 40px;border-radius: 20px;
            border: none;
            color: white; letter-spacing: 1px;
            font-size: 18px;
            font-weight: 600;
            line-height: 21px;
        }

        input::placeholder {
            font-size: 12px;
        }
    </style>

</head>
<body class="has-navbar-fixed-top" style="padding-bottom: 30px;">
<nav class="navbar is-fixed-top" role="navigation" aria-label="main navigation" style="height: 60px;">
    <div style="width: 1164px; display: flex;justify-content: space-between; margin: auto">
        <a class="navbar-item" href="/">
            <img src="../static/확정로고(SVG) 1.svg" style="height: 24px;margin-top: 4px">
        </a>
        <div style="display: flex;font-weight: 580;letter-spacing: 0.5px;width: 700px;justify-content: space-between">
            <div>
                <a class="navbar-item" href="search.html">학교생활기록부</a>
            </div>
            <div>
                <a class="navbar-item" href="search.html">자기소개서</a>
            </div>
            <div>
                <a class="navbar-item" href="search.html">스토리</a>
            </div>
            <div>
                <a href='/readypass'><img src="../static/notLoginNav.svg" style="width: 100px;margin-bottom: -14px"></a>
            </div>
            <div>
                <a class="navbar-item" href='/login'>로그인</a>
            </div>
            <div>
                <a class="navbar-item" href='/register'>회원가입</a>
            </div>
        </div>
    </div>
</nav>

<div id="initial_div" style="width: 378px; margin: 50px auto 0 auto">

    <p style="font-size: 21px; font-weight: 600;text-align: center;color: #333333">비밀번호 재설정</p>
    <br><br>
    <p style="text-align: center">{{ Name }}님, 새로 변경할 비밀번호를 입력해 주세요.</p>
    <br><br>

    <div style="margin-bottom: 16px;display: flex">
        <p>비밀번호</p>
        <p class="is-hidden" id="verified_pw" style="color: #577FF0">&nbsp;&nbsp;&nbsp;<i
                class="fa fa-check-circle-o" aria-hidden="true"></i></p>
    </div>
    <input id="password" type="password" oninput="check_pw()" placeholder="8-20자리의 영문, 숫자 혼용(대문자, 특수문자 가능)"
           style="width: 340px; border: none; border-bottom: #797979 1px solid; height: 40px; line-height: 40px">
    <button style="border: none;font-size: 18px; background: none;cursor: pointer" onmouseenter="$('#password').attr('type','text')" onmouseleave="$('#password').attr('type','password')"><i class="fa fa-eye" aria-hidden="true"></i></button>

    <div style="margin-top: 38px; margin-bottom: 16px;display: flex">
        <p>비밀번호 확인</p>
        <p class="is-hidden" id="verified_repw" style="color: #577FF0">&nbsp;&nbsp;&nbsp;<i
                class="fa fa-check-circle-o" aria-hidden="true"></i></p>
    </div>
    <input id="re_password" placeholder="비밀번호가 동일해야 합니다" type="password" oninput="if ($('#re_password').val() == $('#password').val()){$('#verified_repw').removeClass('is-hidden')}else {$('#verified_repw').addClass('is-hidden')}"
           style="width: 340px; border: none; border-bottom: #797979 1px solid; height: 40px; line-height: 40px">
    <br><br><br><br>

    <button onclick="change_pw()" class="button" style="background: linear-gradient(180deg, #577FF0 0%, #3F61CE 100%);">비밀번호 변경하기</button>
</div>

<footer style="height: 175px;margin: 58px auto 0 auto; padding-top: 70px;display: flex; width: 1194px; border-top: 1px solid #767676">
    <div style="display: flex;">
        <div style="width: 467px;margin-right: 260px">
            <b style="font-size: 12px;line-height: 21px">Readymate 레디메이트</b>
            <div style="display: flex; justify-content: space-between">
                <div style="font-size: 12px;line-height: 21px">회사소개</div>
                <div style="font-size: 12px;line-height: 21px">일반 사용자 이용약관</div>
                <div style="font-size: 12px;line-height: 21px">정보 제공자 이용약관</div>
                <div style="font-size: 12px;line-height: 21px">개인정보취급방침</div>
            </div>
            <p style="margin-top: 25px">
            <p style="font-size: 12px;line-height: 21px">(주)레디메이트&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;대표
                임기범&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;서울특별시
                관악구 관악로 1 어딘가</p>
            <p style="font-size: 12px;line-height: 21px">통신판매업 신고번호 : 제2021-서울구로-0000호&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;사업자
                등록번호 : 000-00-00000</p>
            </p>
        </div>
        <div style="width: 467px; text-align: right">
            <br>
            <p style="font-size: 12px;line-height: 21px">환불 정책&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;제휴 문의&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;단체
                문의</p>
            <br><br>
            <p style="font-size: 12px;line-height: 21px">Instagram&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;Facebook&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;KakaoTalk&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;Naver
                Post&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;YouTube</p>
        </div>
    </div>
</footer>
</body>
</html>