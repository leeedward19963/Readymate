<!doctype html>
<html lang="en">
<head>

    <!-- Webpage Title -->
    <title>{{ menti_info.nickname }} 마이페이지</title>

    <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.png') }}" type="image/x-icon">
    <link rel="icon" href="{{ url_for('static', filename='favicon.png') }}" type="image/x-icon">
    <meta property="og:title" content="READYMATE:수시가쉬워진다"/>
    <meta property="og:description" content="대학생들의 진짜 데이터로 하는 셀프 입시 설계"/>
    <meta property="og:image" content="{{ url_for('static', filename='ogimg.png') }}"/>

    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bulma CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.1/css/bulma.min.css">
    <!-- Font Awesome CSS -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

    <link href="{{ url_for('static', filename='mystyle.css') }}" rel="stylesheet">

    <!-- JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.js"></script>
    <script src="{{ url_for('static', filename='myjs.js') }}"></script>

    <!--google font-->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR&display=swap" rel="stylesheet">

    <!-- 기업은행안심이체 인증마크 적용 시작-->
    <script _ajs_='48_5cdf162da6fce9ea' _ah_='1104104904'>
        function onPopAuthMark(key) {
            window.open('', 'AUTHMARK_POPUP', 'height=900, width=630, status=yes, toolbar=no, menubar=no, location=no');
            document.AUTHMARK_FORM.authmarkinfo.value = key;
            document.AUTHMARK_FORM.action = 'https://kiup.ibk.co.kr/uib/jsp/guest/esc/esc1030/esc103020/CESC302020_i.jsp';
            document.AUTHMARK_FORM.target = 'AUTHMARK_POPUP';
            document.AUTHMARK_FORM.submit();
        }
    </script>

    <FORM name='AUTHMARK_FORM' METHOD='POST'>
        <input type="hidden" name="authmarkinfo">
    </FORM>

    <script>$(function () {
        $("#ib_esc_btn").click(function () {
            onPopAuthMark('기업은행에서 받은 고유번호')
        })
    });</script>
    <!--기업은행안심이체 인증마크 적용 종료 -->
    <style>
        * {
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 16px;
        }

        .navbar-item{font-weight: 600;font-size: 15px;transition-duration: 0.3s;}
        .navbar-item:hover {
            background-color: #FAFAFA;
            color: #577FF0;
        }
        .dropdown-item{transition-duration: 250ms}
        .dropdown-item:hover {
            letter-spacing: 2px;
        }
        #nav_drop_logout:hover{
            color: #F08080;
        }

        .div_up {
            width: 0px;
            height: 0px;
            border-left: 12px solid transparent;
            border-right: 12px solid transparent;
            border-bottom: 12px solid #dedede;
            margin-left: 158.5px;
        }

        .alert_box{
            width: 341px;min-height: 75px;max-height: 340px;background: white;border: 1px #dedede solid;border-radius: 4px;
            box-shadow: 2px 6px 2px rgba(0, 0, 0, 0.25);padding: 20px 25px 6px 25px;
            overflow-y: scroll;
        }
        .alert_delete_btn{background: none;border: white 1px solid;cursor: pointer;height: 20px;border-radius: 10px;line-height: 18px;color: #E94E58;font-size: 12px;position: absolute;right: 134px;top: 9px;transition-duration: 300ms}
        .alert_delete_btn:hover{font-weight: 600;border: #F08080 1px solid;}
        .follow_box{
            width: 480px;height: 70px;padding: 15px;background: #FAFAFA;border-radius: 4px;display: flex;
            position: relative;margin-bottom: 14px;
            cursor: pointer;
        }
        .follow_box >p {
            margin-left: 17px;line-height: 40px;text-overflow:ellipsis; width: 370px; overflow:hidden; white-space:nowrap
        }
        .red_dot{
            width: 12px;height: 12px;border-radius: 6px;background: #E94E58;
            position: absolute; right: 15px;top: 29px;
        }

        .head {
            font-size: 21px;
            color: #595959;
            margin-bottom: 30px;
            cursor: pointer; transition-duration: 200ms;
        }
        .head:hover {
            font-size: 24px;
            font-weight: 700;
            color: #333333;
        }
        .grey_area{
            width: 990px;
            max-height: 443px;
            border-radius: 4px;
            line-height: 32px;
            background:linear-gradient(100.08deg, #EFEFEF 5.16%, #F5F5F5 91.74%);
            padding: 14px 17px
        }
        .cancel_btn{
            border: #dedede 1px solid;background: white;color: #797979;width: max-content;padding: 4px 12px;
            height: 24px;border-radius: 12px;line-height: 14px;
        }


        .footer > div > p > a {
            font-size: 12px;
            color: black;
        }
    </style>
    <script type="text/javascript">
        $(document).ready(function () {

        })
        function totop() {
            $("html, body").animate({scrollTop: 0}, 240);
        }

        function sign_out() {
            $.removeCookie('mytoken', {path: '/'});
            alert('다음에 또 만나요!');
            window.location.href="/login"
        }

    </script>

</head>
<body style="padding-bottom: 30px;background: #fafafa;">
{% if token_receive %}
    <nav class="navbar" role="navigation" aria-label="main navigation" style="background: #FAFAFA;width: 1194px;margin:auto;height: 36px;">
    <div style="width: 1164px; display: flex;justify-content: space-between; margin: auto;">
        <a class="navbar-item" href="/">
            <img src="../static/확정로고(SVG) 1.svg" style="height: 24px;margin-top: 0px">
        </a>
        <div style="display: flex;font-weight: 580;letter-spacing: 0.5px;width: 980px;justify-content: space-between">
            <div style="padding-top: 2px">
                <a class="navbar-item" href='/search?ft=1'>학교생활기록부</a>
            </div>
            <div style="padding-top: 2px">
                <a class="navbar-item" href='/search?ft=2'>자기소개서</a>
            </div>
            <div style="padding-top: 2px">
                <a class="navbar-item" href="/search?ft=3">스토리</a>
            </div>
            <div style="position: relative;margin-left: 240px;padding-top: 2px">
                <a class="navbar-item" onclick="$('#follow_modal').addClass('is-active')">팔로우</a>
                {% if action_mentor %}
                    <div style="width: 10px;height: 10px;border-radius: 5px;background: #E94E58;border: white 2px solid;z-index: 1;position: absolute;right: 0px;top:10px"></div>
                {% endif %}
            </div>
            <div onmouseleave="$('#alert_window').css({ 'visibility':'hidden' })" style="position: relative;padding-top: 2px">
                {% if my_alert|length != 0 %}
                    <div style="width: 10px;height: 10px;border-radius: 5px;background: #E94E58;border: white 2px solid;z-index: 1;position: absolute;right: 10px;top:10px"></div>
                {% endif %}
                <a class="navbar-item" onclick="$('#alert_window').css({ 'visibility':'visible' })">알림&nbsp;&nbsp;
                    <i style="font-weight: bolder" class="fa fa-bell-o" aria-hidden="true"></i>
                </a>
                <div id="alert_window" style="visibility: hidden;position: absolute;left: -135px">
                    <div class="div_up"></div>
                    <div class="alert_box" style="position: relative;">
                    {% if (my_alert|length) > 0 %}
                        <button onclick="if (confirm('알림을 모두 삭제하시겠습니까? 삭제된 알림은 복구할 수 없습니다')){remove_all_alert()}" class="alert_delete_btn">
                            모두 지우기
                        </button>
                    <table style="margin-top: 12px;width:291px">
                        <th style="width:28px "></th>
                        <th style="width: 263px"></th>
                        {% for alert in my_alert|reverse %}
                        <tr style="cursor: pointer;height: 50px" onclick="check_alert('{{ status }}','{{ me_info.number }}','{{ alert.category }}','{{ alert.which_data }}','{{ alert.from_nickname }}')">
                            <td style="vertical-align: middle">
                                <div style="width: 28px;height: 28px;overflow: hidden;border-radius: 14px;border: #f1f1f1 1px solid;margin: 4px 8px 0 0">
                                    <img src="../static/{{ alert.from_image }}"
                                         style="width:100%;height: 100%;object-fit: cover;">
                                </div>
                            </td>
                            <td style="vertical-align: middle;font-size: 13px;">
                                {% if alert.which_data|length >10 %}"{{ alert.which_data[:10] }}"...{% elif (alert.which_data == '내') or (alert.which_data =='커뮤니티') or (alert.which_data =='자기소개서') or (alert.which_data =='스토리') or (alert.which_data =='생활기록부') %}{{ alert.which_data }}{% else %}"{{ alert.which_data }}"{% endif %} {{ alert.category }} {{ alert.from_nickname }}님이 {{ alert.action }}.
                            </td>
                        </tr>
                        {% endfor %}
                        <script>
                            function check_alert(status, me_number, category,which_data,from_nickname) {
                                $.ajax({
                                    type: "POST",
                                    url: "/check_alert",
                                    data: {
                                        status : status,
                                        me_number : me_number,
                                        category : category,
                                        which_data : which_data,
                                        from_nickname : from_nickname
                                    },
                                    success: function (response) {
                                        window.location.href=`${response['url']}`
                                    }
                                });
                            }
                        </script>
                    </table>
                    {% else %}
                        <p style="text-align: center;font-size: 14px;letter-spacing: 1px;color: #797979">새로운 알림이 없습니다</p>
                    {% endif %}
                    </div>
                    <script>
                        function remove_all_alert(){
                            $.ajax({
                                type: "POST",
                                url: "/remove_all_alert",
                                data: {},
                                success: function (response) {
                                    window.location.reload()
                                }
                            });
                        }
                    </script>
                </div>
            </div>
            <div class="dropdown is-right is-hoverable" style="height: 45px; margin-left: 15px">
                <div style="width: 35px;height: 35px;overflow: hidden;border-radius: 17.5px;border: #f1f1f1 1px solid;margin: 4px 10px 0 0">
                    <img src="../static/{{ me_info.profile_pic_real }}"
                         style="width:100%;height: 100%;object-fit: cover;">
                </div>
                <div class="dropdown-trigger">
                    <div aria-haspopup="true" aria-controls="dropdown-menu3"
                         style="margin-top: 9px">
                        <span style="font-size: 15px;font-weight: 600">{{ me_info.nickname }}&nbsp;&nbsp;님&nbsp;</span>
                        <i class="fa fa-chevron-down" aria-hidden="true"
                           style="color: #595959; border: none; border-radius: 5px"></i>
                    </div>
                </div>
            {% if status == 'mentor' %}
                <div class="dropdown-menu" id="dropdown-menu3" role="menu">
                    <div class="mentor-menu" style="width: 176px;background-color: white;border-radius: 2px;box-shadow: 2px 6px 2px rgba(0, 0, 0, 0.25);margin-top: -10px;padding: 0 6px 6px 6px">
                        <a href='/user_mentor/{{ me_info.nickname }}' class="dropdown-item" style="font-size: 15px;margin-bottom: 6px">
                            내 피드 가기
                        </a>
                        <a href='/mentor_mypage_mydata/{{ me_info.nickname }}' class="dropdown-item"
                           style="font-size: 15px;margin-bottom: 6px">
                            입시데이터 관리
                        </a>
                        <a href='/mentor_mypage_mystory/{{ me_info.nickname }}' class="dropdown-item"
                           style="font-size: 15px;margin-bottom: 6px">
                            스토리 관리
                        </a>
                        <a href='/mentor_mypage_profit/{{ me_info.nickname }}' class="dropdown-item"
                           style="font-size: 15px;margin-bottom: 6px">
                            수익내역
                        </a>
                        <a href='/mentor_mypage_info/{{ me_info.nickname }}' class="dropdown-item" style="font-size: 15px;margin-bottom: 6px">
                            마이페이지
                        </a>
                        <a onclick='sign_out()' class="dropdown-item" id="nav_drop_logout"
                           style="font-size: 15px;margin-bottom: 6px;">
                            <i class="fa fa-sign-out" aria-hidden="true"></i>&nbsp;&nbsp; 로그아웃
                        </a>
                    </div>
                </div>
            </div>
            {% else %}
                <div class="dropdown-menu" id="dropdown-menu3" role="menu">
                <div class="menti-menu" style="width: 176px;background-color: white;border-radius: 2px;box-shadow: 2px 6px 2px rgba(0, 0, 0, 0.25);margin-top: -10px;padding: 0 6px 6px 6px">
                        <a href='/menti_mypage_mydata/{{ me_info.nickname }}?mt=2' class="dropdown-item" style="font-size: 15px;margin-bottom: 6px">
                            스트리밍한 데이터
                        </a>
                        <a href='/menti_mypage_mydata/{{ me_info.nickname }}?mt=4' class="dropdown-item" style="font-size: 15px;margin-bottom: 6px">
                            찜한 데이터
                        </a>
                        <a href='/menti_mypage_mydata/{{ me_info.nickname }}?mt=3' class="dropdown-item" style="font-size: 15px;margin-bottom: 6px">
                            스크랩
                        </a>
                        <a href='/menti_mypage_mystory/{{ me_info.nickname }}?mt=1' class="dropdown-item" style="font-size: 15px;margin-bottom: 6px">
                            스트리밍한 스토리
                        </a>
                        <a href='/menti_mypage_info/{{ me_info.nickname }}' class="dropdown-item" style="font-size: 15px;margin-bottom: 6px">
                            마이페이지
                        </a>
                        <a onclick='sign_out()' class="dropdown-item" id="nav_drop_logout" style="font-size: 15px;margin-bottom: 6px;">
                            <i class="fa fa-sign-out" aria-hidden="true"></i>&nbsp;&nbsp; 로그아웃
                        </a>
                    </div>
                </div>
            </div>
            {% endif %}
        </div>
    </div>
    </nav>
    <div class="modal" id="follow_modal">
        <div class="modal-background" style="background: #333333;opacity: 0.3;" onclick='$("#follow_modal").removeClass("is-active")'></div>
        <div class="modal-content"
             style="width: 588px; max-height: 596px; height: max-content;overflow-y: scroll; border-radius: 4px;">
            <div class="box" style="position: relative; padding: 54px;background: #FAFAFA">
                <p style="margin-bottom: 12px"><span style="font-size: 21px;">팔로우 중인 멘토</span>
                <span style="margin-left: 12px">총 <span>{{ (action_mentor|length)+(nonaction_mentor|length) }}</span>명</span></p>
                {% for mentor in action_mentor %}
                    <div class="follow_box" style="animation:0.2s cubic-bezier(0.1, 0, 0.6, 1) {{ loop.index0/7 }}s 1 normal backwards running fcEaNs !important;border-radius: 4px;background: #dedede;" onclick="click_action_mentor('{{ mentor.nickname }}')">
                        <div style="width: 40px;height: 40px;overflow: hidden;border-radius: 20px;border: none;">
                            <img src="../static/{{ mentor.profile_pic_real }}"
                                 style="width:100%;height: 100%;object-fit: cover;">
                        </div>
                        <p>{{ mentor.nickname }} · <span style="color: #595959;font-size: 14px">{{ mentor.univ }}</span>
                        </p>
                        <div class="red_dot"></div>
                    </div>
                {% endfor %}
                <script>
                    function click_action_mentor(nickname) {
                        $.ajax({
                            type: "POST",
                            url: "/click_action_mentor",
                            data: {nickname: nickname},
                            success: function (response) {
                                window.location.href = `/user_mentor/${nickname}`
                            }
                        });
                    }
                </script>
                {% for mentor in nonaction_mentor %}
                    <div class="follow_box" style="animation:0.2s cubic-bezier(0.1, 0, 0.6, 1) {{ (loop.index0 + 5)/7 }}s 1 normal backwards running fcEaNs !important;border-radius: 4px;background: #efefef;" onclick="window.location.href='/user_mentor/{{ mentor.nickname }}'">
                        <div style="width: 40px;height: 40px;overflow: hidden;border-radius: 20px;border: none;">
                            <img src="../static/{{ mentor.profile_pic_real }}"
                                 style="width:100%;height: 100%;object-fit: cover;">
                        </div>
                        <p>{{ mentor.nickname }} · <span style="color: #595959;font-size: 14px">{{ mentor.univ }}</span>
                        </p>
                        <div class="red_dot is-hidden"></div>
                    </div>
                {% endfor %}

            </div>
        </div>
        <button class="modal-close is-large" aria-label="close"
                onclick='$("#follow_modal").removeClass("is-active")'></button>
    </div>
{% else %}
    <nav class="navbar" role="navigation" aria-label="main navigation" style="background: #FAFAFA;width: 1194px;margin:auto;height: 36px;">
        <div style="width: 1164px; display: flex;justify-content: space-between; margin: auto">
            <a class="navbar-item" href="/">
                <img src="../static/확정로고(SVG) 1.svg" style="height: 24px;margin-top: 4px">
            </a>
            <div style="display: flex;font-weight: 580;letter-spacing: 0.5px;width: 700px;justify-content: space-between">
            <div style="padding-top: 2px">
                <a class="navbar-item" href='/search?ft=1'>학교생활기록부</a>
            </div>
            <div style="padding-top: 2px">
                <a class="navbar-item" href='/search?ft=2'>자기소개서</a>
            </div>
            <div style="padding-top: 2px">
                <a class="navbar-item" href="/search?ft=3">스토리</a>
            </div>
            <div style="padding-top: 2px">
                <a href='/readypass'><img src="../static/notLoginNav.svg"
                                              style="width: 100px;margin-bottom: -14px"></a>
            </div>
            <div style="padding-top: 2px">
                <a class="navbar-item" href='/login'>로그인</a>
            </div>
            <div style="padding-top: 2px">
                <a class="navbar-item" href='/register'>회원가입</a>
            </div>
            </div>
        </div>
    </nav>
{% endif %}

<div style="width: 1194px; margin: 90px auto 40px auto">
    <div style="display: flex; margin-bottom: 80px">
        <div style="width: 72px;height: 72px;overflow: hidden;border-radius: 36px;border: none;">
            <img src="../static/{{ menti_info.profile_pic_real }}"
                 style="width:100%;height: 100%;object-fit: cover;">
        </div>

        <div style="margin-left: 30px; height: 72px;">
            <div style="color: #111111;font-size: 24px; margin-bottom: 11px">{{ menti_info.nickname }}</div>
            <p style="border: none; color: #595959;width: 800px;font-size: 14px;">
                {% if menti_info.phone %}
                    {{ menti_info.phone }}
                {% else %}
                    {{ menti_info.email }}
                {% endif %}
            </p>
        </div>
    </div>
    <div style="display: flex;position: relative">
        <div style="width: 174px;margin-right: 40px">
            <div onclick="window.location.href='/menti_mypage_pass/{{ menti_info.nickname }}'" onmouseover="$('#head_2_1, #head_2_2, #head_2_3, #head_2_4, #head_3_1, #head_3_2').addClass('is-hidden');" id="head_1" class="head" style="font-size: 24px;font-weight: 700;color: #333333;">연간 패스/결제</div>
            <div onclick="window.location.href='/menti_mypage_mydata/{{ menti_info.nickname }}?mt=1'" onmouseover="$('#head_2_1, #head_2_2, #head_2_3, #head_2_4').removeClass('is-hidden')" id="head_2" class="head">내 데이터</div>
            <div onclick="window.location.href='/menti_mypage_mydata/{{ menti_info.nickname }}?mt=1'" id="head_2_1" class="head is-hidden" style="font-size: 16px;margin-top: -18px">구매한 데이터</div>
            <div onclick="window.location.href='/menti_mypage_mydata/{{ menti_info.nickname }}?mt=2'" id="head_2_2" class="head is-hidden" style="font-size: 16px;margin-top: -18px">스트리밍한 데이터</div>
            <div onclick="window.location.href='/menti_mypage_mydata/{{ menti_info.nickname }}?mt=3'" id="head_2_3" class="head is-hidden" style="font-size: 16px;margin-top: -18px">북마크</div>
            <div onclick="window.location.href='/menti_mypage_mydata/{{ menti_info.nickname }}?mt=4'" id="head_2_4" class="head is-hidden" style="font-size: 16px;margin-top: -18px">찜한 데이터</div>
            <div onclick="window.location.href='/menti_mypage_mystory/{{ menti_info.nickname }}?mt=1'" onmouseover="$('#head_3_1, #head_3_2').removeClass('is-hidden')" id="head_3" class="head">내 스토리</div>
            <div onclick="window.location.href='/menti_mypage_mystory/{{ menti_info.nickname }}?mt=1'" id="head_3_1" class="head is-hidden" style="font-size: 16px;margin-top: -18px">스트리밍한 스토리</div>
            <div onclick="window.location.href='/menti_mypage_mystory/{{ menti_info.nickname }}?mt=2'" id="head_3_2" class="head is-hidden" style="font-size: 16px;margin-top: -18px">북마크</div>
            <div onclick="window.location.href='/menti_mypage_info/{{ menti_info.nickname }}'" onmouseover="$('#head_2_1, #head_2_2, #head_2_3, #head_2_4, #head_3_1, #head_3_2').addClass('is-hidden');" id="head_4" class="head">회원정보수정</div>
        </div>
<!--        좌측 탭-->

        <div>
            <div style="width: 990px">
                {% if menti_info.pass != '' %}
                    <div class="grey_area">
                        {% set pass = menti_info.pass %}
                        <script>
                            $(document).ready(function () {
                                var str = '{{ pass }}';
                                var pd = str.split(',')[0].split('/')[0] + '년 ' + str.split(',')[0].split('/')[1] + '월 ' + str.split(',')[0].split('/')[2] + '일 ' + str.split(',')[1].split(':')[0] + ':' + str.split(',')[1].split(':')[1] + ':' + str.split(',')[1].split(':')[2]
                                var ed = parseInt(str.split(',')[0].split('/')[0]) + 1 + '년 ' + str.split(',')[0].split('/')[1] + '월 ' + str.split(',')[0].split('/')[2] + '일 ' + str.split(',')[1].split(':')[0] + ':' + str.split(',')[1].split(':')[1] + ':' + str.split(',')[1].split(':')[2]
                                $('#pd').text(pd)
                                $('#pd2').text(pd)
                                $('#ed').text(ed)
                            })
                        </script>
                        <p style="font-size: 21px;margin-bottom: 10px">이용 현황</p>
                        <p>연간 패스 이용중입니다.</p>
                        <br>
                        <p style="color: #577FF0">레디메이트 연간 패스</p>
                        <table>
                            <tr>
                                <td style="width: 180px">이용 기간</td>
                                {% for pay1 in my_pay %}
                                {% if pay1.category == 'pass' %}
                                <td>{{ pay1.pay_time }} ~ {{ pay1.exp_time }}</td>
                            </tr>
                            <tr>
                                <td style="width: 180px">결제일</td>
                                <td id="pd2">{{ pay1.pay_time }}</td>
                            </tr>
                            <tr>
                                <td style="width: 180px">결제 금액</td>
                                <td><span>{{ pay1.price }}</span> 원</td>
                                {% endif %}
                                {% endfor %}
                            </tr>
                        </table>
                    </div>
                {% else %}
                    <div class="grey_area">
                        <p style="font-size: 21px;margin-bottom: 10px">이용 현황</p>
                        <p style="color: #333333">연간 패스를 이용하고 있지 않습니다.<br>레디메이트 연간 패스를 사용해 대학생 멘토들의 입시데이터를 1년간 무제한으로 열람하세요!</p>
                        <br>
                        <div style="display: flex;justify-content: space-evenly;">
                            <div style="width: 417px; height: 157px;color: #333333;line-height: 48px;width: max-content;margin-left: 49px">
                                <p style="font-size: 18px;text-align: right">추가금 없이 <b style="font-size: 21px;color: #577FF0;letter-spacing: 1px">모든 입시데이터</b> 열람 가능</p>
                                <p style="font-size: 18px;text-align: right">90일 → <b style="font-size: 21px;color: #577FF0;letter-spacing: 1px">365일</b>, 열람기간은 더 길게</p>
                                <p style="font-size: 18px;text-align: right">패스 기간 동안 열람 가능 횟수 <b style="font-size: 21px;color: #577FF0;letter-spacing: 1px">무제한</b></p>
                            </div>
                            <img style="height: 157px;margin-right: 80px" src="../static/readypass_page/rp_7.png">
                        </div>
                        <br><br>
                        <button onclick="window.location.href='/readypass'" style="width: 264px;margin-left: 333px;height: 40px;border-radius: 20px;cursor:pointer;margin-right: 29px;border: none;color: white;font-weight: 600;background: linear-gradient(90.83deg, #55DBC2 0%, #52C0E2 38.33%, #577FF0 64.9%, #7351E1 100%);">
                            레디메이트 연간패스 보러가기
                        </button>
                        <br><br>
                    </div>
                {% endif %}
                <br><br>

                <p style="font-size: 21px;margin-bottom: 10px;margin-left: 12px">구매 내역</p>
                <p style="margin-left: 12px">개별 데이터, 패스권을 포함한 나의 모든 결제 내역입니다.</p>
                <br>

                {% if my_pay|length == 0 %}
                <div style="width: 990px;max-height: 443px;border-radius: 4px;line-height: 32px;background:linear-gradient(100.08deg, #EFEFEF 5.16%, #F5F5F5 91.74%);padding: 14px 17px">
                    <p style="color: #595959;line-height: 132px;text-align: center">추가 구매 내역이 없어요.</p>
                </div><br>
                {% else %}
                    {% for pay in my_pay %}
                        {% if pay.category == 'pass' %}
                            <div style="width: 990px;max-height: 443px;border-radius: 4px;line-height: 32px;background:linear-gradient(100.08deg, #EFEFEF 5.16%, #F5F5F5 91.74%);padding: 14px 17px">
                                <p style="color: #577FF0">레디메이트 연간 패스</p>
                                <table>
                                    <tr>
                                        <td style="width: 180px">이용 기간</td>
                                        <td><span>{{ pay.pay_time }}</span> ~ <span>{{ pay.exp_time }}</span></td>
                                    </tr>
                                    <tr>
                                        <td style="width: 180px">결제일</td>
                                        <td><span>{{ pay.pay_time }}</span></td>
                                    </tr>
                                    <tr>
                                        <td style="width: 180px">결제 금액</td>
                                        <td><span>{{ pay.price }}</span> 원</td>
                                    </tr>
                                </table>
                                {% if pay.cancel %}
                                <button style="float: right" class="cancel_btn" onclick="cancel(this)">결제 취소</button>
                                {% endif %}
                            <br>
                            </div>
                            <br>
                        {% else %}
                            <div style="width: 990px;max-height: 443px;border-radius: 4px;line-height: 32px;background:linear-gradient(100.08deg, #EFEFEF 5.16%, #F5F5F5 91.74%);padding: 14px 17px">
                                {% if pay.category == 'recordpaper' %}
                                    <p style="color: #577FF0;font-size: 14px">생활기록부</p>
                                {% elif pay.category == 'resume' %}
                                    <p style="color: #577FF0;font-size: 14px">자기소개서</p>
                                {% else %}
                                    <p style="color: #577FF0;font-size: 14px">레디메이트 연간패스</p>
                                {% endif %}
                                <table>
                                    {% if pay.category != 'readypass' %}
                                    <tr>
                                        <td style="width: 180px">상품 제목</td>
                                        <td>{{ pay.title }}</td>
                                    </tr>
                                    {% endif %}
                                    <tr>
                                        <td style="width: 180px">결제 방식</td>
                                        <td>{{ pay.method_name }} ({% if pay.card_quota == '00' %}일시불{% else %}{{ pay.card_quota }}개월 할부{% endif %}) {% if pay.cardname != 'undefined' %}{{ pay.card_name }}{% endif %} {{ pay.card_no }}</td>
                                    </tr>
                                    <tr>
                                        <td style="width: 180px">이용 기간</td>
                                        <td><span>{{ pay.pay_time }}</span> ~ <span>{{ pay.exp_time }}</span></td>
                                    </tr>
                                    <tr>
                                        <td style="width: 180px">결제일</td>
                                        <td><span>{{ pay.pay_time }}</span></td>
                                    </tr>
                                    <tr>
                                        <td style="width: 180px">결제 금액</td>
                                        <td><span>{{ pay.price }}</span> 원</td>
                                    </tr>
                                </table>{{ pay.cancel }}
                                {% if pay.cancel %}
                                <button id="{{ pay.number }}_{{ pay.category }}_{{ pay.time }}" style="float: right" class="cancel_btn" onclick="cancel(this)">결제 취소</button>
                                {% endif %}
                            <br>
                            </div>
                            <br>
                        {% endif %}
                    {% endfor %}
                {% endif %}
            </div>
        <script>
            function cancel(obj){
                var reason = prompt('취소 사유를 입력해주세요')
                var info = obj.id
                var mentor_num = info.split('_')[0]
                var category = info.split('_')[1]
                var time = info.split('_')[2]
                let form_data = new FormData
                form_data.append('category', category)
                form_data.append('time', time)
                form_data.append('number', mentor_num)
                form_data.append('reason', reason)
                $.ajax({
                    type: "POST",
                    url: `/pay_cancel/{{ me_info.number }}`,
                    data: form_data,
                    cache: false,
                    contentType: false, processData: false,
                    success: function (response) {
                        alert('결제 취소되었습니다')
                    }
                })
            }
        </script>

        <br>
            <div>
                <p style="color: #111111">안내사항</p><br>
                <li style="font-size: 14px;margin-bottom: 8px">연간 패스 구매내역을 타인에게 양도하거나, 다른 아이디로 이전하는 기능은 제공하지 않습니다.</li>
                <li style="font-size: 14px;margin-bottom: 8px">연간 패스 금액은 부가세(10%)가 포함된 금액입니다.</li>
                <li style="font-size: 14px;margin-bottom: 8px">결제 상세내역은 현재 페이지에서 결제한 패스를 클릭하면 확인 가능합니다.</li>
                <li style="font-size: 14px;margin-bottom: 8px">결제 후 7일 이내에 데이터를 열람하지 않았을 시에는 전액 환불이 가능하며, 이후로는 이용 기간과 이용
                    데이터에 대한 금액을 제하고 환불이 가능합니다.
                </li>
                <li style="font-size: 14px;margin-bottom: 8px">환불요청은 고객명, 휴대폰 번호(또는 이메일) 정보와 함께 우측 하단의 말풍선을 눌러 1:1 문의로
                    남겨주세요. (고객문의에 대한 답변은 평일 10~5시 사이에 가능합니다.)
                </li>
                <li style="font-size: 14px;margin-bottom: 8px">연간 패스 이용 기간이 남아 있는 경우, 연간 패스 이용 종료일 전날까지 환불이 가능합니다.</li>
                <li style="font-size: 14px;margin-bottom: 8px">연간 패스 혜택은 연간 패스 이용 기간 중에만 적용됩니다.</li>
            </div>
        </div>
    </div>
</div>

<footer style="height: 175px; padding-top: 70px;display: flex; width: 1194px; margin: auto; border-top: 1px solid #767676">
    <div style="display: flex;">
    <div style="width: 577px;margin-right: 120px">
        <b style="font-size: 12px;line-height: 21px">Readymate 레디메이트</b>
        <div style="display: flex; justify-content: space-between">
            <div style="cursor: pointer;font-size: 12px;line-height: 21px" onclick="window.location.href='https://readymate.notion.site/aa2584d2c3af4d83b165c73c8662150e'">회사소개</div>
            <div style="cursor: pointer;font-size: 12px;line-height: 21px" onclick="window.location.href='https://readymate.notion.site/43b81d2da127443b8834c7f642b8dd4b'">일반 사용자 이용약관</div>
            <div style="cursor: pointer;font-size: 12px;line-height: 21px" onclick="window.location.href='https://readymate.notion.site/e12f0990993946e99a7152f2c19ee235'">정보 제공자 이용약관</div>
            <div style="cursor: pointer;font-size: 12px;line-height: 21px" onclick="window.location.href='https://readymate.notion.site/211119a3699645ee870c2be4ef09f24f'">개인정보취급방침</div>
        </div>
        <p style="margin-top: 28px">
        <p style="font-size: 12px;line-height: 21px">(주)레디메이트&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;대표 임기범&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;서울특별시 서초구 강남대로61길 10, 6충 607호(서초동, 센터프라자)</p>
        <p style="font-size: 12px;line-height: 21px">통신판매업 신고번호 : 2021-서울서초-3123&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;사업자
            등록번호 : 292-87-02175</p>
        </p>
    </div>
    <div style="width: 437px; text-align: right">
        <br>
        <p style="font-size: 12px;line-height: 21px"><span style="cursor: pointer;font-size: 12px" onclick="window.location.href='https://readymate.notion.site/78b989750d024461a5c90533f85a96a2'">환불 정책</span>&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;<span
                style="cursor: pointer;font-size: 12px" onclick="window.location.href='https://readymate.notion.site/39914dc412af494ca378ce3ffbcb46e6'">제휴 문의</span></p>
        <br><br>
        <p style="font-size: 12px;line-height: 21px"><span style="cursor: pointer;font-size: 12px" onclick="window.location.href='https://www.instagram.com/readymate_official/'">Instagram</span>&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-size: 12px" onclick="window.location.href='https://www.facebook.com/readymateofficial/'">Facebook</span>&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-size: 12px" onclick="window.location.href='https://pf.kakao.com/_yxcxjrs'">KakaoTalk</span>&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-size: 12px" onclick="window.location.href='https://blog.naver.com/readymate'">Naver Blog</span>
            &nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;<span style="cursor: pointer;font-size: 12px" onclick="window.location.href='https://www.youtube.com/channel/UCqIpL26iqOWWkNoaBtJlRqA'">YouTube</span></p>
    </div>
    <a style="cursor: pointer;margin-top: 24px;margin-left: 30px" href="javascript:onPopAuthMark('8c4ea07fb774f8fc8e2c6c2c56adc835')"><img
            src='https://kiup.ibk.co.kr/IBK/uib/ecb/img/KO/esc/sub/imgIbkMark.gif' alt='인증마크' border='0'/></a>

</div>
</footer>
<script>
    $(document).ready(function (){
        setTimeout(function (){
            var temp = `<div onclick="totop()" class="totop"
                         style="z-index: 2; cursor:pointer; position: fixed;bottom: 110px;right: 25px;box-shadow: rgb(0 0 0 / 15%) 0px 4px 6px 0px;animation:0.2s cubic-bezier(0.1, 0, 0.6, 1) 0.6s 1 normal backwards running fcEaNs !important;transition:box-shadow 0.2s ease-out 0s;border-radius: 31px; width: 62px;height: 62px;">
                        <img src="../../static/to_top.png" width="72px">
                    </div>`
            $('footer').after(temp)
        },400)
    })
</script>
<!-- Channel Plugin Scripts -->
{% if token_receive %}
<script>
        (function () {
            var w = window;
            if (w.ChannelIO) {
                return (window.console.error || window.console.log || function () {
                })('ChannelIO script included twice.');
            }
            var ch = function () {
                ch.c(arguments);
            };
            ch.q = [];
            ch.c = function (args) {
                ch.q.push(args);
            };
            w.ChannelIO = ch;

            function l() {
                if (w.ChannelIOInitialized) {
                    return;
                }
                w.ChannelIOInitialized = true;
                var s = document.createElement('script');
                s.type = 'text/javascript';
                s.async = true;
                s.src = 'https://cdn.channel.io/plugin/ch-plugin-web.js';
                s.charset = 'UTF-8';
                var x = document.getElementsByTagName('script')[0];
                x.parentNode.insertBefore(s, x);
            }

            if (document.readyState === 'complete') {
                l();
            } else if (window.attachEvent) {
                window.attachEvent('onload', l);
            } else {
                window.addEventListener('DOMContentLoaded', l, false);
                window.addEventListener('load', l, false);
            }
        })();
        ChannelIO('boot', {
            "pluginKey": "6674a760-acc4-4f4a-b498-1eecdc0e18ca", //please fill with your plugin key
        {% if me_info.phone %}
            "memberId": "{{ me_info.phone }}", //fill with user id
        {% else %}
            "memberId": "{{ me_info.email }}", //fill with user id
        {% endif %}
            "profile": {
                "name": "{{ me_info.name }}", //fill with user name
                "mobileNumber": "{{ me_info.phone }}", //fill with user phone number
                "CUSTOM_VALUE_1": "VALUE_1", //any other custom meta data
                "CUSTOM_VALUE_2": "VALUE_2"
            }
        });
    </script>
{% endif %}
</body>
</html>
